<h2 mat-dialog-title>Write a Review for {{ data.bookTitle }}</h2>

<mat-dialog-content [formGroup]="reviewForm">
  <div class="rating-section">
    <p>Your Rating:</p>
    <div class="stars">
      <mat-icon *ngFor="let star of [1, 2, 3, 4, 5]" (click)="setRating(star)" [fontIcon]="getStarIcon(star)"></mat-icon>
    </div>
    <mat-error *ngIf="reviewForm.controls['rating'].hasError('required') && reviewForm.controls['rating'].touched">
      Please select a rating.
    </mat-error>
  </div>

  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Comments</mat-label>
    <textarea matInput formControlName="comment" rows="5" placeholder="Share your thoughts..."></textarea>
    <mat-hint align="end">{{ reviewForm.controls['comment'].value?.length || 0 }}/500</mat-hint>
    <mat-error *ngIf="reviewForm.controls['comment'].hasError('maxlength')">
      Comments cannot exceed 500 characters.
    </mat-error>
  </mat-form-field>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()">Cancel</button>
  <button mat-raised-button color="primary" (click)="onSubmit()" [disabled]="reviewForm.invalid">Submit Review</button>
</mat-dialog-actions>
